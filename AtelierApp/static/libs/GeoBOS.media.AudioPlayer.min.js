!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var o=n();for(var t in o)("object"==typeof exports?exports:e)[t]=o[t]}}(this,function(){return function(e){function n(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var o={};return n.m=e,n.c=o,n.i=function(e){return e},n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,o){"use strict";!function(e){var n=function(){var e=null,n={mp3:!0,mpeg:!0,opus:!0,ogg:!0,oga:!0,wav:!0,aac:!0,caf:!0,m4a:!0,mp4:!0,weba:!0,webm:!0,dolby:!0,flac:!0};try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return console.error("Audio Object is not supported!"),n}if(!e||"function"!=typeof e.canPlayType)return console.error("CanPlayType function is not supported!"),n;var o=e.canPlayType("audio/mpeg;").replace(/^no$/,"");return n={mp3:!(!o&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")}},o={on:function(e,n,o){this.subscribe(e,n,o,!1)},one:function(e,n,o){this.subscribe(e,n,o,!0)},off:function(e,n){if(void 0!==this.channels[e]){var o=void 0,t=void 0;for(o=0,t=this.channels[e].length;o<t;o++){if(this.channels[e][o].fn===n){this.channels[e].splice(o,1);break}}}},subscribe:function(e,n,o,t){void 0===this.channels&&(this.channels={}),this.channels[e]=this.channels[e]||[],this.channels[e].push({fn:n,ctx:o,once:t||!1})},trigger:function(e){if(this.channels&&this.channels.hasOwnProperty(e)){for(var n=Array.prototype.slice.call(arguments,1),o=[];this.channels[e].length>0;){var t=this.channels[e].shift();"function"==typeof t.fn&&t.fn.apply(t.ctx,n),t.once||o.push(t)}this.channels[e]=o}}},t=function(){var e=function(e){var n=this;n._queue=[],n._loop=e.loop||!1,n._muted=e.muted||!1,n._rate=e.rate||1,n._volume=e.volume||1,n._state="unloaded",n._duration=0,n._currentTime=0,n._src="string"!=typeof e.src?e.src:[e.src],n.init()};return e.prototype={init:function(){var e=this;if(e._node="undefined"!=typeof Audio?new Audio:null,!e._node)return console.error("Audio Object is not supported!"),void(e._state="error");e._node.preload="auto",e._node.loop=e._loop,e._node.autoplay=!1,e._node.muted=e._muted,e._node.volume=e._volume,e._node.controls&&e._node.removeAttribute("controls"),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener("canplaythrough",e._loadFn,!1),e._node.addEventListener("ended",function(){var n=e.currentTime();0!==n&&n===e.duration()&&e._node.paused&&(o.trigger("_onend"),e._state="ended",o.trigger("_onstate"))},!1),e._node.addEventListener("durationchange",function(){var n=e._node.duration;e._duration=isNaN(n)?0:Math.round(100*n)/100},!1),e._node.addEventListener("timeupdate",function(){var n=e._node.currentTime;e._currentTime=isNaN(n)?0:Math.round(100*n)/100},!1),e._node.addEventListener("playing",function(){o.trigger("_onplay"),e._state="playing",o.trigger("_onstate")},!1),e._node.addEventListener("pause",function(){},!1),e._node.addEventListener("volumechange",function(){},!1)},state:function(){return this._state},load:function(){var e=this,n=null;"string"==typeof e._src&&(e._src=[e._src]);for(var t=0;t<e._src.length;t++){var r=void 0,a=e._src[t];if("string"==typeof a){if(r=/\.([^.]+)$/.exec(a.split("?",1)[0]),r&&(r=r[1].toLowerCase()),r||console.warn("No file extension was found"),r&&e.isSupported(r)){n=e._src[t];break}}else o.trigger("_onerror","Non-string found in selected audio sources - ignoring.")}return n?("unloaded"===e.state()&&(e._src=n,e._state="loading",o.trigger("_onstate"),e._node.src=e._src),e):(o.trigger("_onerror","No codec support for the audio sources"),null)},isSupported:function(e){return n()[e]},play:function(){var e=this,n=e.state();return"loaded"===n||"paused"===n||"stopped"===n||"ended"===n?(e._node.play(),e):"loading"===n?(e._queue.push({event:"play",action:function(){e.play()}}),null):e},pause:function(){var e=this;return"playing"!==e._state?e:(e._node.pause(),o.trigger("_onpause"),e._state="paused",o.trigger("_onstate"),e)},stop:function(){var e=this;return"playing"!==e._state?e:(e._node.currentTime=0,e._node.pause(),o.trigger("_onstop"),e._state="stopped",o.trigger("_onstate"),e)},mute:function(e){var n=this,t=n.state();return"unload"===t||"loading"===t?n:"boolean"!=typeof e?n._muted:(n._muted=e,n._node.muted=e,o.trigger("_onmute"),n)},volume:function(e){var n=this,t=n.state();return"unload"===t||"loading"===t?n:"number"!=typeof e?n._volume:(e=Math.max(0,e),e=Math.min(1,e),e=Math.round(100*e)/100,n._volume=e,n._node.volume=e,o.trigger("_onvolume"),n)},duration:function(){return this._duration},currentTime:function(){return this._currentTime},once:function(e,n){var t=this;return o.one("_on"+e,n,t),t},on:function(e,n){var t=this;return o.on("_on"+e,n,t),t},off:function(e,n){var t=this;return o.off("_on"+e,n),t},_errorListener:function(){var e=this;o.trigger("_onerror",e._node.error?e._node.error.message:"Unknown error in loading audio files!"),e._state="error",o.trigger("_onstate"),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this;"loaded"!==e._state&&(e._state="loaded",o.trigger("_onload"),o.trigger("_onstate"),e._loadQueue()),e._node.removeEventListener("canplaythrough",e._loadFn,!1)},_loadQueue:function(){var e=this;if(e._queue.length>0){var n=e._queue[0];e.once(n.event,function(){e._queue.shift(),e._loadQueue()}),n.action()}return e}},{getInstance:function(n){return new e(n)}}}();e.GeoBOS=e.GeoBOS||{},e.GeoBOS.media=e.GeoBOS.media||{},e.GeoBOS.media.AudioPlayer=t}(window)}])});