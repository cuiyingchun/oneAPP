"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};!function(l){(l=l||{}).plugin=l.plugin||{};var a;if(!function(){return"object"===("undefined"==typeof atelier?"undefined":_typeof(atelier))}())return null;a=function(a,c,e,o,n){GeoBOS.logger.log("receive native message: "+a+", contentï¼š"+o+", isSuccess: "+c);var r=l.adhoc.callbackMap[a];if(a===l.adhoc.callbackId.SEND)r&&r(o);else if(a===l.adhoc.callbackId.SEND_FILE)r&&r(o);else if(a===l.adhoc.callbackId.RECEIVE_MESSAGE){console.log("receive json string: "+o);var d=window.JSON.parse(o).message;console.log("get data: "+d);t={data:d=window.decodeURIComponent(d)};r&&r(t)}else if(a===l.adhoc.callbackId.RECEIVE_FILE){var t={meta:{uniqueId:window.JSON.parse(o).uniqueId},filePath:window.JSON.parse(o).filename.slice(7),peerAddr:window.JSON.parse(o).peerAddr};r&&r(t)}else a===l.adhoc.callbackId.SIP_UA_REQ?((r=l.call.callbackMap[a])&&(c?r(null,o):r(new Error(o)),l.call.callbackMap[a]=null),(r=l.adhoc.callbackMap[a])&&(c?r(null,o):r(new Error(o)),l.adhoc.callbackMap[a]=null)):a===l.call.callbackId.SIP_UA_SON_INCOMING_CALL?(r=l.call.callbackMap[a])&&r(o):a===l.call.callbackId.UA_ANSWER?(r=l.call.callbackMap[a])&&(c?r(null,o):r(new Error(o))):a===l.call.callbackId.UA_SON_HANGUP?(r=l.call.callbackMap[a])&&(c?r(null,o):r(new Error(o))):a===l.call.callbackId.UA_SON_CALL?(r=l.call.callbackMap[a])&&(c?r(null,o):r(new Error(o))):a===l.call.callbackId.SIP_UA_SON_CALL_ACCEPT?(r=l.call.callbackMap[a])&&r(o):a===l.call.callbackId.SIP_UA_SON_CALL_REJECT?(r=l.call.callbackMap[a])&&r(o):a===l.call.callbackId.SIP_UA_SON_CALL_TIMEOUT?(r=l.call.callbackMap[a])&&r(o):a===l.call.callbackId.SIP_UA_SON_CALL_END?(r=l.call.callbackMap[a])&&r(o):a===l.call.callbackId.SIP_UA_SON_CALL_CANCEL?(r=l.call.callbackMap[a])&&r(o):console.log("unknow plugin callback id: "+a)},atelier.plugin.onNativeMessage.addListener(a)}(GeoBOS);